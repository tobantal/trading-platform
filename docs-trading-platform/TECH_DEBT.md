# Технический долг (Technical Debt)

> Последнее обновление: 2026-01-22
> Статус: Все баги перенесены в технический долг для ускорения разработки

## Приоритеты

| Приоритет | Описание |
|-----------|----------|
| P1 | Критично — блокирует работу |
| P2 | Важно — нужно исправить до production |
| P3 | Желательно — улучшит качество кода |
| P4 | Низкий — можно отложить |

---

## TD-003: Дублирование данных (DRY)

**Приоритет:** P3  
**Статус:** Технический долг

### Проблемы

1. **Instrument.currency + Money.currency**
   - В `Instrument` есть `std::string currency`
   - В `Money minPriceIncrement` тоже есть `currency`
   - Дублирование может привести к рассинхронизации

2. **OrderRequest.accountId + метод placeOrder(accountId, request)**
   - `accountId` передаётся дважды

### Решение
- Вариант A: Убрать `currency` из `Instrument`, оставить только в `Money`
- Вариант B (выбран): Оставить как есть, но в коде использовать только один источник

---

## TD-004: Дублирование генерации UUID

**Приоритет:** P4  
**Статус:** Частично исправлен

### Описание
В разных местах дублируется код генерации UUID.

### Решение
Создан `include/utils/UuidGenerator.hpp`. Нужно везде использовать его.

---

## TD-006: Рефакторинг/удаление библиотеки common

**Приоритет:** P3  
**Статус:** Требует реализации

### Описание
Выпилить неиспользуемые классы: `CommandException`, `ICommand`, `IUObject`, `UObject`, `ThreadSafeQueue`.
Отсается на текущий момент только `ThreadSafeMap`. Либо перенести туда, где используется, либо заменить на продвинутый `Cache` из библиотеки cpp-cache.

----

## TD-007: Починить сборку docker в CI

**Приоритет:** P3  
**Статус:** Требует реализации

### Описание
В `/todo/ci-dcoker-need-word.yml` часть `cmake.yml`, которую нужно доработать, чтоб собирался проект из запускались докер контейнеры с приложениями в GitHUb Action.

Добавить интеграционные тесты.

---

## Договорённости

### По новым endpoint-ам
Все новые endpoint-ы реализуем как отдельные хэндлеры (1 класс = 1 endpoint).

### По рефакторингу
Рефакторим существующий код только при:
- Появлении бага в этом коде
- Наличии свободного времени после основных задач

### По приоритетам
- P1, P2 — исправляем до защиты
- P3, P4 — после защиты (или при наличии времени)
