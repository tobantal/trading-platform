#pragma once

#include <any>
#include <string>
#include <stdexcept>

/**
 * @file IUObject.hpp
 * @brief Интерфейс универсального объекта
 * @author Anton Tobolkin
 * @version 1.0
 */

/**
 * @brief Интерфейс для управления свойствами объектов
 *
 * Интерфейс класса задает контракт для всех объектов,
 * реализующих паттерн "Универсальный объект". Это позволяет хранить
 * и манипулировать объектами с произвольным набором свойств без
 * необходимости создавать отдельные классы для каждого типа объекта.
 *
 * Использование std::any обеспечивает полиморфизм для хранения
 * свойств различных типов данных.
 */
class IUObject { 
public:
    /**
     * @brief Виртуальный деструктор интерфейса
     *
     * Обеспечивает правильное удаление объектов-наследников
     * при удалении через указатель на интерфейс.
     */
    virtual ~IUObject() = default;

    /**
     * @brief Получить значение свойства объекта
     *
     * Возвращает значение свойства, связанного с указанным ключом.
     * Если свойство не найдено, выбрасывается исключение.
     *
     * @param key Ключ (название) запрашиваемого свойства
     * @return std::any Значение свойства (может быть любого типа)
     * @throws std::runtime_error Если свойство не найдено или недоступно
     */
    virtual std::any getProperty(const std::string& key) const = 0;

    /**
     * @brief Установить значение свойства объекта
     *
     * Устанавливает или обновляет значение свойства с указанным ключом.
     * Если свойство не существует, оно создается. Тип значения может быть
     * произвольным благодаря использованию std::any.
     *
     * @param key Ключ (название) устанавливаемого свойства
     * @param value Новое значение свойства (может быть любого типа)
     * @throws std::runtime_error Если свойство защищено от записи или
     *         операция не поддерживается реализацией
     */
    virtual void setProperty(const std::string& key, const std::any& value) = 0;
};